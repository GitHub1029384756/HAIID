{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"itemHeight\", \"style\", \"scrollViewComponent\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction isNumeric(str) {\n  if (typeof str === \"number\") return true;\n  if (typeof str !== \"string\") return false;\n  return !isNaN(str) && !isNaN(parseFloat(str));\n}\n\nvar deviceWidth = Dimensions.get(\"window\").width;\n\nvar isViewStyle = function isViewStyle(style) {\n  return typeof style === \"object\" && style !== null && Object.keys(style).includes(\"height\");\n};\n\nexport default function ScrollPicker(_ref) {\n  var _ref$itemHeight = _ref.itemHeight,\n      itemHeight = _ref$itemHeight === void 0 ? 30 : _ref$itemHeight,\n      style = _ref.style,\n      scrollViewComponent = _ref.scrollViewComponent,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      initialized = _useState2[0],\n      setInitialized = _useState2[1];\n\n  var _useState3 = useState(props.selectedIndex && props.selectedIndex >= 0 ? props.selectedIndex : 0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedIndex = _useState4[0],\n      setSelectedIndex = _useState4[1];\n\n  var sView = useRef(null);\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isScrollTo = _useState6[0],\n      setIsScrollTo = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dragStarted = _useState8[0],\n      setDragStarted = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      momentumStarted = _useState10[0],\n      setMomentumStarted = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      timer = _useState12[0],\n      setTimer = _useState12[1];\n\n  var wrapperHeight = props.wrapperHeight || (isViewStyle(style) && isNumeric(style.height) ? Number(style.height) : 0) || itemHeight * 5;\n  useEffect(function initialize() {\n    if (initialized) return;\n    setInitialized(true);\n    setTimeout(function () {\n      var _sView$current;\n\n      var y = itemHeight * selectedIndex;\n      sView == null ? void 0 : (_sView$current = sView.current) == null ? void 0 : _sView$current.scrollTo({\n        y: y\n      });\n    }, 0);\n    return function () {\n      timer && clearTimeout(timer);\n    };\n  }, [initialized, itemHeight, selectedIndex, sView, timer]);\n\n  var renderPlaceHolder = function renderPlaceHolder() {\n    var h = (wrapperHeight - itemHeight) / 2;\n\n    var header = _jsx(View, {\n      style: {\n        height: h,\n        flex: 1\n      }\n    });\n\n    var footer = _jsx(View, {\n      style: {\n        height: h,\n        flex: 1\n      }\n    });\n\n    return {\n      header: header,\n      footer: footer\n    };\n  };\n\n  var renderItem = function renderItem(data, index) {\n    var isSelected = index === selectedIndex;\n    var item = props.renderItem ? props.renderItem(data, index, isSelected) : _jsx(Text, {\n      style: isSelected ? [styles.itemText, styles.itemTextSelected] : styles.itemText,\n      children: data\n    });\n    return _jsx(View, {\n      style: [styles.itemWrapper, {\n        height: itemHeight\n      }],\n      children: item\n    }, index);\n  };\n\n  var scrollFix = useCallback(function (e) {\n    var y = 0;\n    var h = itemHeight;\n\n    if (e.nativeEvent.contentOffset) {\n      y = e.nativeEvent.contentOffset.y;\n    }\n\n    var _selectedIndex = Math.round(y / h);\n\n    var _y = _selectedIndex * h;\n\n    if (_y !== y) {\n      var _sView$current2;\n\n      if (Platform.OS === \"ios\") {\n        setIsScrollTo(true);\n      }\n\n      sView == null ? void 0 : (_sView$current2 = sView.current) == null ? void 0 : _sView$current2.scrollTo({\n        y: _y\n      });\n    }\n\n    if (selectedIndex === _selectedIndex) {\n      return;\n    }\n\n    if (props.onValueChange) {\n      var selectedValue = props.dataSource[_selectedIndex];\n      setSelectedIndex(_selectedIndex);\n      props.onValueChange(selectedValue, _selectedIndex);\n    }\n  }, [itemHeight, props, selectedIndex]);\n\n  var _onScrollBeginDrag = function onScrollBeginDrag() {\n    setDragStarted(true);\n\n    if (Platform.OS === \"ios\") {\n      setIsScrollTo(false);\n    }\n\n    timer && clearTimeout(timer);\n  };\n\n  var _onScrollEndDrag = function onScrollEndDrag(e) {\n    setDragStarted(false);\n\n    var _e = _objectSpread({}, e);\n\n    timer && clearTimeout(timer);\n    setTimer(setTimeout(function () {\n      if (!momentumStarted) {\n        scrollFix(_e);\n      }\n    }, 50));\n  };\n\n  var _onMomentumScrollBegin = function onMomentumScrollBegin() {\n    setMomentumStarted(true);\n    timer && clearTimeout(timer);\n  };\n\n  var _onMomentumScrollEnd = function onMomentumScrollEnd(e) {\n    setMomentumStarted(false);\n\n    if (!isScrollTo && !dragStarted) {\n      scrollFix(e);\n    }\n  };\n\n  var _renderPlaceHolder = renderPlaceHolder(),\n      header = _renderPlaceHolder.header,\n      footer = _renderPlaceHolder.footer;\n\n  var highlightWidth = (isViewStyle(style) ? style.width : 0) || deviceWidth;\n  var highlightColor = props.highlightColor || \"#333\";\n  var highlightBorderWidth = props.highlightBorderWidth || StyleSheet.hairlineWidth;\n  var wrapperStyle = {\n    height: wrapperHeight,\n    flex: 1,\n    backgroundColor: props.wrapperColor || \"#fafafa\",\n    overflow: \"hidden\"\n  };\n  var highlightStyle = {\n    position: \"absolute\",\n    top: (wrapperHeight - itemHeight) / 2,\n    height: itemHeight,\n    width: highlightWidth,\n    borderTopColor: highlightColor,\n    borderBottomColor: highlightColor,\n    borderTopWidth: highlightBorderWidth,\n    borderBottomWidth: highlightBorderWidth\n  };\n  var CustomScrollViewComponent = scrollViewComponent || ScrollView;\n  return _jsxs(View, {\n    style: wrapperStyle,\n    children: [_jsx(View, {\n      style: highlightStyle\n    }), _jsxs(CustomScrollViewComponent, {\n      ref: sView,\n      bounces: false,\n      showsVerticalScrollIndicator: false,\n      nestedScrollEnabled: true,\n      onMomentumScrollBegin: function onMomentumScrollBegin(_e) {\n        return _onMomentumScrollBegin();\n      },\n      onMomentumScrollEnd: function onMomentumScrollEnd(e) {\n        return _onMomentumScrollEnd(e);\n      },\n      onScrollBeginDrag: function onScrollBeginDrag(_e) {\n        return _onScrollBeginDrag();\n      },\n      onScrollEndDrag: function onScrollEndDrag(e) {\n        return _onScrollEndDrag(e);\n      },\n      children: [header, props.dataSource.map(renderItem), footer]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  itemWrapper: {\n    height: 30,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  itemText: {\n    color: \"#999\"\n  },\n  itemTextSelected: {\n    color: \"#333\"\n  }\n});","map":{"version":3,"sources":["C:/Users/ryanj/Desktop/HAIID/node_modules/react-native-wheel-scrollview-picker/index.tsx"],"names":["React","useCallback","useEffect","useRef","useState","isNumeric","str","isNaN","parseFloat","deviceWidth","Dimensions","get","width","isViewStyle","style","Object","keys","includes","ScrollPicker","itemHeight","scrollViewComponent","props","initialized","setInitialized","selectedIndex","setSelectedIndex","sView","isScrollTo","setIsScrollTo","dragStarted","setDragStarted","momentumStarted","setMomentumStarted","timer","setTimer","wrapperHeight","height","Number","initialize","setTimeout","y","current","scrollTo","clearTimeout","renderPlaceHolder","h","header","flex","footer","renderItem","data","index","isSelected","item","styles","itemText","itemTextSelected","itemWrapper","scrollFix","e","nativeEvent","contentOffset","_selectedIndex","Math","round","_y","Platform","OS","onValueChange","selectedValue","dataSource","onScrollBeginDrag","onScrollEndDrag","_e","onMomentumScrollBegin","onMomentumScrollEnd","highlightWidth","highlightColor","highlightBorderWidth","StyleSheet","hairlineWidth","wrapperStyle","backgroundColor","wrapperColor","overflow","highlightStyle","position","top","borderTopColor","borderBottomColor","borderTopWidth","borderBottomWidth","CustomScrollViewComponent","ScrollView","map","create","justifyContent","alignItems","color"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  Dimensions,\r\n  NativeScrollEvent,\r\n  NativeSyntheticEvent,\r\n  Platform,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  ViewProps,\r\n  ViewStyle,\r\n} from \"react-native\";\r\n\r\nfunction isNumeric(str: string | unknown): boolean {\r\n  if (typeof str === \"number\") return true;\r\n  if (typeof str !== \"string\") return false;\r\n  return (\r\n    !isNaN(str as unknown as number) && // use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...\r\n    !isNaN(parseFloat(str))\r\n  ); // ...and ensure strings of whitespace fail\r\n}\r\n\r\nconst deviceWidth = Dimensions.get(\"window\").width;\r\n\r\nconst isViewStyle = (style: ViewProps[\"style\"]): style is ViewStyle => {\r\n  return (\r\n    typeof style === \"object\" &&\r\n    style !== null &&\r\n    Object.keys(style).includes(\"height\")\r\n  );\r\n};\r\n\r\nexport type ScrollPickerProps = {\r\n  style?: ViewProps[\"style\"];\r\n  dataSource: Array<string | number>;\r\n  selectedIndex?: number;\r\n  onValueChange?: (\r\n    value: ScrollPickerProps[\"dataSource\"][0],\r\n    index: number\r\n  ) => void;\r\n  renderItem?: (\r\n    data: ScrollPickerProps[\"dataSource\"][0],\r\n    index: number,\r\n    isSelected: boolean\r\n  ) => JSX.Element;\r\n  highlightColor?: string;\r\n  highlightBorderWidth?: number;\r\n  itemHeight?: number;\r\n  wrapperHeight?: number;\r\n  wrapperColor?: string;\r\n  // TODO: add proper type to `scrollViewComponent` prop\r\n  // tried using ComponentType<ScrollViewProps & { ref: React.RefObject<ScrollView> }>\r\n  // but ScrollView component from react-native-gesture=handler is not compatible with this.\r\n  scrollViewComponent?: any;\r\n};\r\n\r\nexport default function ScrollPicker({\r\n  itemHeight = 30,\r\n  style,\r\n  scrollViewComponent,\r\n  ...props\r\n}: ScrollPickerProps): JSX.Element {\r\n  const [initialized, setInitialized] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(\r\n    props.selectedIndex && props.selectedIndex >= 0 ? props.selectedIndex : 0\r\n  );\r\n  const sView = useRef<ScrollView>(null);\r\n  const [isScrollTo, setIsScrollTo] = useState(false);\r\n  const [dragStarted, setDragStarted] = useState(false);\r\n  const [momentumStarted, setMomentumStarted] = useState(false);\r\n  const [timer, setTimer] = useState<NodeJS.Timeout | null>(null);\r\n\r\n  const wrapperHeight =\r\n    props.wrapperHeight ||\r\n    (isViewStyle(style) && isNumeric(style.height)\r\n      ? Number(style.height)\r\n      : 0) ||\r\n    itemHeight * 5;\r\n\r\n  useEffect(\r\n    function initialize() {\r\n      if (initialized) return;\r\n      setInitialized(true);\r\n\r\n      setTimeout(() => {\r\n        const y = itemHeight * selectedIndex;\r\n        sView?.current?.scrollTo({ y: y });\r\n      }, 0);\r\n\r\n      return () => {\r\n        timer && clearTimeout(timer);\r\n      };\r\n    },\r\n    [initialized, itemHeight, selectedIndex, sView, timer]\r\n  );\r\n\r\n  const renderPlaceHolder = () => {\r\n    const h = (wrapperHeight - itemHeight) / 2;\r\n    const header = <View style={{ height: h, flex: 1 }} />;\r\n    const footer = <View style={{ height: h, flex: 1 }} />;\r\n    return { header, footer };\r\n  };\r\n\r\n  const renderItem = (\r\n    data: ScrollPickerProps[\"dataSource\"][0],\r\n    index: number\r\n  ) => {\r\n    const isSelected = index === selectedIndex;\r\n    const item = props.renderItem ? (\r\n      props.renderItem(data, index, isSelected)\r\n    ) : (\r\n      <Text\r\n        style={\r\n          isSelected\r\n            ? [styles.itemText, styles.itemTextSelected]\r\n            : styles.itemText\r\n        }\r\n      >\r\n        {data}\r\n      </Text>\r\n    );\r\n\r\n    return (\r\n      <View style={[styles.itemWrapper, { height: itemHeight }]} key={index}>\r\n        {item}\r\n      </View>\r\n    );\r\n  };\r\n  const scrollFix = useCallback(\r\n    (e: NativeSyntheticEvent<NativeScrollEvent>) => {\r\n      let y = 0;\r\n      const h = itemHeight;\r\n      if (e.nativeEvent.contentOffset) {\r\n        y = e.nativeEvent.contentOffset.y;\r\n      }\r\n      const _selectedIndex = Math.round(y / h);\r\n\r\n      const _y = _selectedIndex * h;\r\n      if (_y !== y) {\r\n        // using scrollTo in ios, onMomentumScrollEnd will be invoked\r\n        if (Platform.OS === \"ios\") {\r\n          setIsScrollTo(true);\r\n        }\r\n        sView?.current?.scrollTo({ y: _y });\r\n      }\r\n      if (selectedIndex === _selectedIndex) {\r\n        return;\r\n      }\r\n      // onValueChange\r\n      if (props.onValueChange) {\r\n        const selectedValue = props.dataSource[_selectedIndex];\r\n        setSelectedIndex(_selectedIndex);\r\n        props.onValueChange(selectedValue, _selectedIndex);\r\n      }\r\n    },\r\n    [itemHeight, props, selectedIndex]\r\n  );\r\n\r\n  const onScrollBeginDrag = () => {\r\n    setDragStarted(true);\r\n\r\n    if (Platform.OS === \"ios\") {\r\n      setIsScrollTo(false);\r\n    }\r\n    timer && clearTimeout(timer);\r\n  };\r\n\r\n  const onScrollEndDrag = (e: NativeSyntheticEvent<NativeScrollEvent>) => {\r\n    setDragStarted(false);\r\n\r\n    // if not used, event will be garbaged\r\n    const _e: NativeSyntheticEvent<NativeScrollEvent> = { ...e };\r\n    timer && clearTimeout(timer);\r\n    setTimer(\r\n      setTimeout(() => {\r\n        if (!momentumStarted) {\r\n          scrollFix(_e);\r\n        }\r\n      }, 50)\r\n    );\r\n  };\r\n  const onMomentumScrollBegin = () => {\r\n    setMomentumStarted(true);\r\n    timer && clearTimeout(timer);\r\n  };\r\n\r\n  const onMomentumScrollEnd = (e: NativeSyntheticEvent<NativeScrollEvent>) => {\r\n    setMomentumStarted(false);\r\n\r\n    if (!isScrollTo && !dragStarted) {\r\n      scrollFix(e);\r\n    }\r\n  };\r\n\r\n  const { header, footer } = renderPlaceHolder();\r\n  const highlightWidth = (isViewStyle(style) ? style.width : 0) || deviceWidth;\r\n  const highlightColor = props.highlightColor || \"#333\";\r\n  const highlightBorderWidth =\r\n    props.highlightBorderWidth || StyleSheet.hairlineWidth;\r\n\r\n  const wrapperStyle: ViewStyle = {\r\n    height: wrapperHeight,\r\n    flex: 1,\r\n    backgroundColor: props.wrapperColor || \"#fafafa\",\r\n    overflow: \"hidden\",\r\n  };\r\n\r\n  const highlightStyle: ViewStyle = {\r\n    position: \"absolute\",\r\n    top: (wrapperHeight - itemHeight) / 2,\r\n    height: itemHeight,\r\n    width: highlightWidth,\r\n    borderTopColor: highlightColor,\r\n    borderBottomColor: highlightColor,\r\n    borderTopWidth: highlightBorderWidth,\r\n    borderBottomWidth: highlightBorderWidth,\r\n  };\r\n\r\n  const CustomScrollViewComponent = scrollViewComponent || ScrollView;\r\n\r\n  return (\r\n    <View style={wrapperStyle}>\r\n      <View style={highlightStyle} />\r\n      <CustomScrollViewComponent\r\n        ref={sView}\r\n        bounces={false}\r\n        showsVerticalScrollIndicator={false}\r\n        nestedScrollEnabled\r\n        onMomentumScrollBegin={(_e: any) => onMomentumScrollBegin()}\r\n        onMomentumScrollEnd={(e: NativeSyntheticEvent<NativeScrollEvent>) =>\r\n          onMomentumScrollEnd(e)\r\n        }\r\n        onScrollBeginDrag={(_e: any) => onScrollBeginDrag()}\r\n        onScrollEndDrag={(e: NativeSyntheticEvent<NativeScrollEvent>) =>\r\n          onScrollEndDrag(e)\r\n        }\r\n      >\r\n        {header}\r\n        {props.dataSource.map(renderItem)}\r\n        {footer}\r\n      </CustomScrollViewComponent>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  itemWrapper: {\r\n    height: 30,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  itemText: {\r\n    color: \"#999\",\r\n  },\r\n  itemTextSelected: {\r\n    color: \"#333\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}